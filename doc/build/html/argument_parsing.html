

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Argument parsing &mdash; CorePost 0.0.16 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.16',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="CorePost 0.0.16 documentation" href="index.html" />
    <link rel="next" title="Argument validation" href="arguments.html" />
    <link rel="prev" title="URL Routing" href="url_routing.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="arguments.html" title="Argument validation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="url_routing.html" title="URL Routing"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">CorePost 0.0.16 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="argument-parsing">
<h1>Argument parsing<a class="headerlink" href="#argument-parsing" title="Permalink to this headline">¶</a></h1>
<p>CorePost can automatically parse query arguments, form arguments, as well as basic JSON, YAML and XML documents
and extract those as direct arguments to a REST router method.</p>
<p>Let&#8217;s say we have a basic method that responds to GET, POST and PUT requests.
It expects a first name and last name and outputs them back in the response:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@router</span><span class="p">(</span><span class="s">&quot;/name&quot;</span><span class="p">,(</span><span class="n">Http</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span><span class="n">Http</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span><span class="n">Http</span><span class="o">.</span><span class="n">PUT</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">request</span><span class="p">,</span><span class="n">first</span><span class="p">,</span><span class="n">last</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="query-arguments">
<h2>Query arguments<a class="headerlink" href="#query-arguments" title="Permalink to this headline">¶</a></h2>
<p>For GET requests, the query arguments will be automatically parsed, e.g.:</p>
<div class="highlight-python"><pre>curl http://127.0.0.1/name?first=John&amp;last=Doe</pre>
</div>
</div>
<div class="section" id="form-encoded-arguments">
<h2>Form encoded arguments<a class="headerlink" href="#form-encoded-arguments" title="Permalink to this headline">¶</a></h2>
<p>For POST/PUT requests, any form-encoded arguments will be automatically parsed, e.g.:</p>
<div class="highlight-python"><pre>curl -X POST http://localhost/name -d "first=John&amp;last=Doe"</pre>
</div>
</div>
<div class="section" id="json-document-arguments">
<h2>JSON document arguments<a class="headerlink" href="#json-document-arguments" title="Permalink to this headline">¶</a></h2>
<p>For the same method, you could just post a JSON document instead that looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;first&quot;</span><span class="p">:</span><span class="s">&quot;John&quot;</span><span class="p">,</span><span class="s">&quot;last&quot;</span><span class="p">:</span><span class="s">&quot;Doe&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>CorePost will automatically pass all the root elements of the document as arguments into a method.
Requires the <em>&#8216;application/json&#8217;</em> content type to be passed.</p>
</div>
<div class="section" id="yaml-document-arguments">
<h2>YAML document arguments<a class="headerlink" href="#yaml-document-arguments" title="Permalink to this headline">¶</a></h2>
<p>For the same method, you could just post a YAML document that looks like this:</p>
<div class="highlight-python"><pre>first:John
last:Doe</pre>
</div>
<p>CorePost will automatically pass all the root elements of the document as arguments into a method.
Requires the <em>&#8216;text/yaml&#8217;</em> content type to be passed.</p>
</div>
<div class="section" id="xml-document-arguments">
<h2>XML document arguments<a class="headerlink" href="#xml-document-arguments" title="Permalink to this headline">¶</a></h2>
<p>XML documents are supported as well. In that case, CorePost will first parse all the attributes on the root node
and then all of the children underneath the main root node.</p>
<p>Hence all of the XML formats below are valid and would generate the same parameters to a method.</p>
<p>Attributes only:</p>
<div class="highlight-python"><pre>&lt;root first="John" last="Doe"/&gt;</pre>
</div>
<p>Mix of attributes and child nodes:</p>
<div class="highlight-python"><pre>&lt;root first="John"&gt;
        &lt;last&gt;Doe&lt;/last&gt;
&lt;/root&gt;</pre>
</div>
<p>Child nodes only:</p>
<div class="highlight-python"><pre>&lt;root&gt;
        &lt;first&gt;John&lt;/first&gt;
        &lt;last&gt;Doe&lt;/last&gt;
&lt;/root&gt;</pre>
</div>
<p>Requires the <em>&#8216;text/xml&#8217;</em> OR <em>&#8216;application/xml&#8217;</em> content type to be passed.</p>
<p>As you can see from the examples above, a single CorePost router method can handle all these varied forms of argument parsing
for you without any additional effort.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Argument parsing</a><ul>
<li><a class="reference internal" href="#query-arguments">Query arguments</a></li>
<li><a class="reference internal" href="#form-encoded-arguments">Form encoded arguments</a></li>
<li><a class="reference internal" href="#json-document-arguments">JSON document arguments</a></li>
<li><a class="reference internal" href="#yaml-document-arguments">YAML document arguments</a></li>
<li><a class="reference internal" href="#xml-document-arguments">XML document arguments</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="url_routing.html"
                        title="previous chapter">URL Routing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="arguments.html"
                        title="next chapter">Argument validation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/argument_parsing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="arguments.html" title="Argument validation"
             >next</a> |</li>
        <li class="right" >
          <a href="url_routing.html" title="URL Routing"
             >previous</a> |</li>
        <li><a href="index.html">CorePost 0.0.16 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jacek Furmankiewicz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>